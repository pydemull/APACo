---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  eval = FALSE,
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# APACo

<!-- badges: start -->
[![R-CMD-check](https://github.com/pydemull/APACo/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/pydemull/APACo/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

## Overview of the repository
The aim of this repository is to allow the understanding, the reproduction, and finally the evaluation of the analytical pipeline implemented to get the results of the APA&Co project ([ClinicalTrials.gov ID: NCT04732923](https://clinicaltrials.gov/study/NCT04732923?term=APA%26Co&rank=4)). The APA&Co project was conducted to observe the change in physical condition, physical activity, and motivation for physical activity in coronary artery disease patients at 1 year after following a cardiac rehabilitation program. This research project was managed by the hospital center of Cholet (France).

The repository has four branches, `master`, `gh-pages`, `docker`, and `pipeline`:

* The `master` branch hosts the content of the `{APACo}` package. The content of the package includes datasets that have been build from the data obtained through the measurements implemented in the APA&Co project. These datasets are actually restricted versions of the original datasets to limit the public access to only the materials required to understand the results to be reported in scientific publications. The package also includes the code that been written to develop the functions used to analyse the data of the project. The code is based on R programming language. Of note, the functions of the package were not written so that they can be easily reused in other projects. That being said, one of the major function of the package, called `analyse_change` and that provides both figures and tables describing the difference between two marginal distributions of paired data, has been developped so that it may be reused in worflows using similar data.

* The `gh-pages` branch hosts the files on which stands the [package website](https://pydemull.github.io/APACo/). This website contains a `Reference` tab where the list of the datasets and functions included in the package is shown. Each item of the list birefly present the content of the datasets and the arguments of the functions. If you want to learn about the computations that functions perform, you shoud go to the `R/` folder of the `master` branch where each file contains the code of a given function.

* The `docker` branch contains the code to build a Docker and to put that imagex to a Docker Hub repository. A Docker image is a kind of virtual environment, that can be configured as needed, and that is immutable. In the present case, the Docker image includes R software (v4.3.1) and a version of the `{renv}` package. The interest of this Docker image to provide an environment in which we can be sure that the analytical pipeline of the project will work and will provide exactly the same results, forever.

* The `pipeline` branch contains the code that run the analytical pipeline of the APA&Co project. This pipeline, that is based on the `{targets}` package, is an organized sucession of actions that use the datasets and the functions of the `{APA&Co}` package to generate the results embedded in .html files. The main interest of the pipeline is to automatically drive the analyses, thus non-interactively. This is an important step to ensure the reproducibility of the analyses and the results. The branch also contains R code based on the {renv} package to allow the restoration of all the package dependencies relating to the pipeline analysis, which another required step to ensure the reproducibility of the analytical process and thus the results. Of note, this branch also hosts a GitHub Action workflow that builds an image from the one hosted on the Docker Hub repository as described above and by adding package dependencies of the analytical pipeline and by running the pipeline and finally stock the .html files in a volume. After that, the workflow consists in building a Docker container which allow the move of the .html files from the image to a GitHub repository. You can access the .html files.


## Licenses
### Code
The code of the `{APACo}` package is provided under GNU General Public License Version 3.0 (please see LICENSE.md file).

### Datasets
<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br />The datasets included in the `{APACo}` package are provided under <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">License Creative Commons Attribution NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)</a>.

