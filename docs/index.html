<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A package to reproduce the analytical pipeline of the APA &amp; Co project.">
<title>Reproduce APA &amp; Co project analyses â€¢ APACo</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Reproduce APA &amp; Co project analyses">
<meta property="og:description" content="A package to reproduce the analytical pipeline of the APA &amp; Co project.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">APACo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="apaco">APACo<a class="anchor" aria-label="anchor" href="#apaco"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="overview-of-the-repository">Overview of the repository<a class="anchor" aria-label="anchor" href="#overview-of-the-repository"></a>
</h2>
<p>The aim of this repository is to allow the understanding, the reproduction, and finally the evaluation of the analytical pipeline implemented to get the results of the APA&amp;Co project (<a href="https://clinicaltrials.gov/study/NCT04732923?term=APA%26Co&amp;rank=4" class="external-link">ClinicalTrials.gov ID: NCT04732923</a>). The APA&amp;Co project was conducted to observe the change in physical condition, physical activity, and motivation for physical activity in coronary artery disease patients at 1 year after having followed a cardiac rehabilitation program. This research project was managed by the hospital center of Cholet (France).</p>
<p>The repository has four branches, <code>master</code>, <code>gh-pages</code>, <code>docker</code>, and <code>pipeline</code>:</p>
<ul>
<li><p>The <code>master</code> branch hosts the content of the <code>{APACo}</code> package. The content of the package includes datasets that have been built from the data obtained through the measurements implemented in the APA&amp;Co project. These datasets actually are censored versions of the original datasets to limit the access to only the materials required to understand the results shown in the present repository. The package also includes the code (the functions) that has been developed to analyse the data of the project. The code is based on R programming language. Of note, the functions of the package have not been written with the aim to make them easily reusable in other projects. That being said, one of the major function of the package, called <code>analyse_change</code> and that provides both figures and tables describing the differences between two marginal distributions of paired data, has been developped so that it may be reused when working with similar data.</p></li>
<li><p>The <code>gh-pages</code> branch hosts the files on which stands the <a href="https://pydemull.github.io/APACo/" class="external-link"><code>{APACo}</code> package website</a>. This website contains a <a href="https://pydemull.github.io/APACo/reference/index.html" class="external-link">Reference tab</a> where the list of the datasets and functions included in the package is shown. Each item of the list briefly presents the content of the datasets or the arguments of the considered function. If you want to know the computations that the <code>{APACo}</code> package functions implement, you shoud go to the <code>R/</code> folder of the <code>master</code> branch where each file contains the code of a given function.</p></li>
<li><p>The <code>docker</code> branch contains the code to build a Docker image and to push that image to a Docker Hub repository. A Docker image is a kind of virtual environment, that can be configured as needed, and that is immutable. In the present case, the Docker image includes R software (v4.3.1) and a version of the <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> package. The interest of this Docker image is to provide an environment in which we can be sure that the analytical pipeline of the project will work and will provide exactly the same results, forever.</p></li>
<li><p>The <code>pipeline</code> branch contains the code that runs the analytical pipeline of the APA&amp;Co project. This pipeline, that is based on the <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a> package, is an organized sequence of actions that use the datasets and the functions of the <code>{APACo}</code> package to generate the results embedded in .html files. The main interest of the pipeline is to automatically (so non-interactively) drive the analyses. This is an important step to ensure the reproducibility of the analyses and the results. The branch also contains R code that uses the <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> package to allow the restoration of all the package dependencies relating to the analytical pipeline, which is another step required to ensure the reproducibility of the analytical pipeline and thus the results. Of note, this branch also hosts a GitHub Actions workflow that builds a Docker image from the one hosted on the Docker Hub repository as described above. This new image contains the results of the APA&amp;Co project that are stored as .html files in a Docker volume after running the installation of the package dependencies of the analytical pipeline and then running the analytical pipeline itself. After that, the workflow consists in building a Docker container from which the .html files are moved to the present GitHub repository. You can access these .html files by consulting the last <a href="https://github.com/pydemull/APACo/actions/workflows/run-dockerized-pipeline.yml" class="external-link">dockerized-pipeline workflow run</a>. When you are on the web page of the workflow and click on the link of a workflow run (the last one for example, at the top of the list), you are conducted to a new web page where an <code>Artifacts</code> section contains the created files embedded in a zipped folder. You can finally download that folder on your machine to consult the results.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="how-the-content-of-this-repository-can-be-used-to-allow-the-reproduction-of-the-analyses-of-the-apaco-project">How the content of this repository can be used to allow the reproduction of the analyses of the APA&amp;Co project<a class="anchor" aria-label="anchor" href="#how-the-content-of-this-repository-can-be-used-to-allow-the-reproduction-of-the-analyses-of-the-apaco-project"></a>
</h2>
<p>We suggest two approaches to reproduce the analyses of the APA&amp;Co project : running the analytical pipeline on a PC and its current system settings; or running the analytical pipeline on the web with GitHub Actions and Docker. These two approaches are some advantages and limits depending on you are interested in the understanding or the reproducibility of the analyses.</p>
<div class="section level3">
<h3 id="running-the-analytical-pipeline-on-a-pc-and-its-current-system-settings">Running the analytical pipeline on a PC and its current system settings<a class="anchor" aria-label="anchor" href="#running-the-analytical-pipeline-on-a-pc-and-its-current-system-settings"></a>
</h3>
<p>This approach may be interesting if you want to explore, after running the analytical pipeline, the content of the created objects and the content of the functions in the same place, that is, in the environnement where you are running R software. However, the main downside of this approach is that reproducibility is not fully garanteed. Indeed, the success of an analytical pipeline run is dependent on various factors that cannot be controlled by the content of the present repository, in particular, the current version of R you are using, and the configuration of the system that lives on your machine. This is why, in order to reproduce the analytical pipeline exactly as it was performed to get the results of the project, the second approach is better, and actually, not so far to be the best. Anyway, if you want to reproduce the analytical pipeline on your machine in R, please follow the steps below.</p>
<ul>
<li>Step 1: <a href="https://cran.rstudio.com/" class="external-link">Install R (version &gt;= 4.1.0)</a>, <a href="https://posit.co/download/rstudio-desktop/" class="external-link">RStudio</a>, and the <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">latest version of Rtools (if your are a Windows user)</a> on your machine.</li>
<li>Step 2: Go to the <a href="https://github.com/pydemull/APACo/tree/pipeline" class="external-link"><code>pipeline</code> branch of the APACo repository</a> and click on the green button called <code>Code</code>. Then click on <code>Download ZIP</code>.</li>
<li>Step 3: Unzip the zipped folder on your machine, open it, and double-click on the <code>APACo.Rproj</code> file to open the project in RStudio.</li>
<li>Step 4: Restore the package dependencies of the project with <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> using the following command line in the Console:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/restore.html" class="external-link">restore</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This may takes some time so that all the required packages are downloaded from the web and then installed in the project directory.</p>
<ul>
<li>Step 5: Run the analytical pipeline with <a href="https://docs.ropensci.org/targets/" class="external-link">targets</a> using the following command line in the Console:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_make.html" class="external-link">tar_make</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This last step will produce all the objects relating to the analytical process. It also will generate the materials (a .html report with the main results, .tiff figures, and .html file-based supplementary materials) that are deemed to be used for a scientific publication. Some materials will take time to be built because they include several high resolution figures.</p>
<p>The list of the objects created during the analytical process is shown in the Console after each â€˜targetâ€™ expression. Once the analytical pipeline ended, you will can read any created object running <code>targets::tar_read(OBJECT_NAME)</code> in the Console. You also will can load any object in the global environment running <code>targets::tar_load(OBJECT_NAME)</code> in the Console. You can load all the created objects in one go running <code><a href="https://docs.ropensci.org/targets/reference/tar_load_everything.html" class="external-link">targets::tar_load_everything()</a></code> in the Console. All the figures and .html files generated during the run of the analytical pipeline will appear in the <code>pipeline_out/</code> folder placed at the root of the project. To have more information about what are the computations actually performed behind the scene, you can open the <code>_targets.R</code> file placed at the root of the project. This file essentially includes a list of <code><a href="https://docs.ropensci.org/targets/reference/tar_target.html" class="external-link">targets::tar_target()</a></code> functions, with the name of the object created as first argument, and the operations performed to get that object as second argument. A quick way of looking at the code could be to copy the name of a function of interest and paste it in the Console. Another way, which will provide you a more confortable view of the code, is to go to the <a href="https://github.com/pydemull/APACo" class="external-link">Github repository of the <code>{APACo}</code> package</a>. The files placed in the <code>R/</code> folder contain the code of each of the functions developped for the project.</p>
</div>
<div class="section level3">
<h3 id="running-the-analytical-pipeline-on-the-web-with-github-actions-and-docker">Running the analytical pipeline on the web with GitHub Actions and Docker<a class="anchor" aria-label="anchor" href="#running-the-analytical-pipeline-on-the-web-with-github-actions-and-docker"></a>
</h3>
<p>Running an analytical pipeline using a Docker image is a robust approach to make it reproducible, forever. Here, this approach is implemented on the web via the use of a GitHub Actions workflow. This strategy has already been a little described above during the <code>pipeline</code> branch description. A similar approach, offline and thus without GitHub Actions, could be implemented on a personal machine where Docker software would be installed but as this may not be easy to implement by people that are not familiar with this, we do not describe the steps to do this. Instead, it is possible to rerun the analytical pipeline on the web in the APACo repository. To do this, go to the <a href="https://github.com/pydemull/APACo/actions/workflows/run-dockerized-pipeline.yml" class="external-link">web page relating to the run-dockerized-pipeline worflow</a>. Then, click on the last worklow run. On the rigth of the screen, you will have a button <code>Re-run all jobs</code>. If you confirm this action, the workflow will run another time. Then, if you click on the <code>build</code> button, you will have a view of all the installation and analytical steps performed by the workflow. The downside of this approach is that you will not can interact with the content to explore the intermediate objects created to finally get the results. However, if you have sufficient knowledge about R programming language, you can infere the content of these objects from the code shown in the <code>master</code> branch of the APACo repository.</p>
</div>
</div>
<div class="section level2">
<h2 id="how-to-be-sure-of-the-apaco-package-version-that-is-used-when-running-the-analytical-pipeline">How to be sure of the <code>{APACo}</code> package version that is used when running the analytical pipeline?<a class="anchor" aria-label="anchor" href="#how-to-be-sure-of-the-apaco-package-version-that-is-used-when-running-the-analytical-pipeline"></a>
</h2>
<p>The answer to this question is essential if you want to know exactly what pieces of code have been used to get the final results of the project. To have the answer, you have to look at the <code>renv.lock</code> file placed in the <code>pipeline</code> branch. This file contains all the package dependencies needed to run the analytical pipeline. Moreover, for each package, beyond the version that could be shown, you must look at the <code>RemoteSha</code> field of the package section in the <code>renv.lock</code> file to get the the commit hash. This commit hash is a number that allows to identify a particular commit and then the state of the package when the commit was performed. Once you get that hash, you can add it to the following incomplete URL: <a href="https://github.com/pydemull/APACo/tree/" class="external-link uri">https://github.com/pydemull/APACo/tree/</a>. You will thus get the final URL where is hosted the package as it was when the commit was performed. For example, at the moment of writing theses lines, the hash of the commit corresponding to the version of the <code>{APACo}</code> package used by the analytical pipeline is <code>10c80e32a70ff523a02df61219a14ae2e8ef4274</code>. Thus, the exact code that is used in the analytical pipeline corresponding to this commit can be viewed in the <code>R/</code> folder at the following adress: <a href="https://github.com/pydemull/APACo/tree/10c80e32a70ff523a02df61219a14ae2e8ef4274" class="external-link uri">https://github.com/pydemull/APACo/tree/10c80e32a70ff523a02df61219a14ae2e8ef4274</a>.</p>
</div>
<div class="section level2">
<h2 id="licenses">Licenses<a class="anchor" aria-label="anchor" href="#licenses"></a>
</h2>
<div class="section level3">
<h3 id="code">Code<a class="anchor" aria-label="anchor" href="#code"></a>
</h3>
<p>The code of the <code>{APACo}</code> package is provided under GNU General Public License Version 3.0 (please see LICENSE.md file).</p>
</div>
<div class="section level3">
<h3 id="datasets">Datasets<a class="anchor" aria-label="anchor" href="#datasets"></a>
</h3>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" class="external-link"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png"></a><br>The datasets included in the <code>{APACo}</code> package are provided under <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" class="external-link">License Creative Commons Attribution NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>The Dockerfiles and GitHub Actions workflows that allow an exact reproduction of the analytical pipeline of the APA&amp;Co project are versions updated from <a href="https://github.com/b-rodrigues" class="external-link">Bruno Rodrigues</a>â€™ work. More precisely:</p>
<ul>
<li>The files from the <code>docker</code> branch of the APACo repository are based on the following repository: <a href="https://github.com/b-rodrigues/ga_demo" class="external-link uri">https://github.com/b-rodrigues/ga_demo</a>.</li>
<li>The files from the <code>pipeline</code> branch of the APACo repository are based on the following repository: <a href="https://github.com/b-rodrigues/ga_demo_rap" class="external-link uri">https://github.com/b-rodrigues/ga_demo_rap</a>.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing APACo</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Pierre-Yves de MÃ¼llenheim <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/YOUR-ORCID-ID" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/pydemull/APACo/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/pydemull/APACo/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Pierre-Yves de MÃ¼llenheim.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
